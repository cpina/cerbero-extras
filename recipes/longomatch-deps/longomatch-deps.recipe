# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python
from cerbero.utils import shell

class Recipe(recipe.Recipe):
    name = 'longomatch-deps'
    version = '1.0'
    licenses = [License.LGPL]
    stype = SourceType.CUSTOM
    btype = BuildType.CUSTOM

    def install(self):
        shell.copy_dir(self.relative_path('mono'), self.config.prefix)
        monodir = os.path.join(self.config.prefix, 'lib', 'mono')
        for d in ['atk', 'gdk', 'glade', 'glib', 'gtk', 'pango']:
            gtkdir = os.path.join(monodir, 'gtk-sharp-2.0')
            apath = os.path.join(gtkdir, '%s-sharp.dll' % d)
            shell.call('gacutil -i %s' % apath)
        shell.call('gacutil -i %s' % os.path.join(monodir, 'mono-addins', 'Mono.Addins.dll'))
        shell.call('gacutil -i %s' % os.path.join(monodir, 'db4o', 'Db4objects.Db4o.dll'))
